{% extends "base.html" %}

{% block title %}Users - CalendSync{% endblock %}

{% block content %}
<h1>User Management</h1>

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody id="user-table-body">
        {% for user in users %}
        {% include "partials/user_row.html" %}
        {% endfor %}
    </tbody>
</table>

<h2>Add New User</h2>
<form hx-post="/api/users"
      hx-target="#user-table-body"
      hx-swap="beforeend"
      hx-on::after-request="if(event.detail.successful) this.reset()">
    <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required placeholder="Enter name">
    </div>
    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required placeholder="Enter email">
    </div>
    <button type="submit">
        Add User
        <span class="htmx-indicator">...</span>
    </button>
</form>
{% endblock %}
